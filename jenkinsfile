pipeline {
    agent any 

    parameters {
        string(name: 'NAME', description: 'Please tell me your name?')
        choice(name: 'MONTH', choices: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'], description: 'Choose the month')
        choice(name: 'DAY', choices: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31'], description: 'Choose the day accordingly to the month')
    }
    
    stages {

        stage('Set Goals for the month') {
            steps {
                script {

                    def booleanGoals = []

                    switch(params.MONTH) {

                        case 'January':
                            booleanGoals = [ 
                                booleanParam(name: "BUY_DIARY", description: "Have you bought your diary?"),
                                booleanParam(name: "QUOTE", description: "Have you written a quote that matches your mood?")
                            ]
                            break

                        case 'February':
                            booleanGoals = [ 
                                booleanParam(name: "DECORATION_THEME", description: "Have you chosen your theme?"),
                                booleanParam(name: "DECORATION_PURCHASE", description: "Have you bought the decoration?"),
                                booleanParam(name: "DECORATION_HOUSE", description: "Have you redecorate your house?")
                            ]
                            break

                        case 'March':
                            booleanGoals = [ 
                                booleanParam(name: "20_KM", description: "Have you run your 20 km?"),
                                booleanParam(name: "GYM", description: "Have you signed up for the gym?"),
                                booleanParam(name: "YOGA", description: "Have you signed up for yoga classes?")
                            ]
                            break
                    }
    
                    if (booleanGoals) {
                        currentBuild.description = "Reconfiguring parameters for ${params.MONTH}"
                        def updatedParams = input message: "Fill out the goals for ${params.MONTH}", parameters: booleanGoals
                        params = params + updatedParams
                    }
                }
            }
        }

        stage('Check Goals for the day') {
            steps {
                script {

                    def day = params.DAY.toInteger()

                    def suffix = day % 10 == 1 && day != 11 ? "st" :
                                 day % 10 == 2 && day != 12 ? "nd" :
                                 day % 10 == 3 && day != 13 ? "rd" : "th"

                    echo "Checking goals for ${params.MONTH}, ${day}${suffix}..."
                    sleep(5)

                    switch (params.MONTH) {

                        case 'January':

                            if (params.BUY_DIARY?.toBoolean()) {
                                if (day <= 5) {
                                    echo "Congratulations! You've already bought your diary and you're off to a great start!"
                                } else {
                                    echo "Well done buying your diary! Better late than never—time to get writing!"
                                }
                            } else {
                                if (day < 5) {
                                    echo "Don't forget to buy a diary! Starting early will help you achieve your January goal."
                                } else if (day == 5) {
                                    echo "It's not too late! Grab a diary today and start your journaling journey."
                                } else {
                                    echo "A bit behind, aren't we? To achieve your January goal, you need a diary. Time to get one and get started!"
                                }
                            }

                            if (params.QUOTE?.toBoolean()) {
                                echo "Great job writing a quote that reflects your mood today! It's a beautiful way to connect with your emotions and express yourself."
                            } else {
                                echo "Remember to write a quote that matches your mood today! It's a small yet meaningful step to bring clarity to your thoughts and emotions."
                            }
                          
                            break

                        case 'February':

                            if (params.DECORATION_THEME?.toBoolean()) {
                                if (day <= 5) {
                                    echo "Congratulations on choosing your decoration theme early! You're on the right track!"
                                } else {
                                    echo "Great job choosing your decoration theme! A bit late, but better late than never!"
                                }
                            } else {
                                if (day < 5) {
                                    echo "Don't forget to choose your decoration theme! It's the first step to transforming your space."
                                } else if (day == 5) {
                                    echo "It's not too late! Choose your decoration theme today and get started."
                                } else {
                                    echo "Choosing a decoration theme is essential! Time is flying—get started soon to stay on track!"
                                }
                            }
                      
                            if (params.DECORATION_PURCHASE?.toBoolean()) {
                                if (day <= 15) {
                                    echo "Well done buying your decorations! You're making great progress!"
                                } else {
                                    echo "Good job purchasing your decorations! It's a bit late, but you can still make it work!"
                                }
                            } else {
                                if (day < 15) {
                                    echo "Don't forget to buy your decorations! Having them ready will make the process smoother."
                                } else if (day == 15) {
                                    echo "It's not too late! Buy your decorations today and you're still on track."
                                } else {
                                    echo "You haven't bought your decorations yet? Time to hurry—February is slipping away!"
                                }
                            }
                        
                            if (params.DECORATION_HOUSE?.toBoolean()) {
                                if (day <= 25) {
                                    echo "Amazing! Your home is looking fantastic after redecorating—great work!"
                                } else {
                                    echo "Congratulations on redecorating your home! A bit close to the deadline, but still a success!"
                                }
                            } else {
                                if (day < 25) {
                                    echo "Don't forget to start redecorating your home! The sooner you begin, the more enjoyable the result."
                                } else if (day == 25) {
                                    echo "It's not too late! Start redecorating today!"
                                } else {
                                    echo "February is almost over, and your home isn't redecorated yet? Time to get moving—there's still time to make a difference!"
                                }
                            }
                            break

                        case 'March':
                            if (params.20_KM.toBoolean()) {
                                echo "Congratulations on running 20 km this month! Your dedication to fitness is inspiring!"
                                def progress = 100 
                                echo "Progress: |" + "=".repeat(progress / 10) + "| ${progress}%"
                            } else {
                                echo "You're on your way to completing the 20 km goal! Keep running—March isn't over yet!"
                                def completedDistance = input(
                                    message: "Enter the distance you've run so far (in km):",
                                    parameters: [
                                        string(name: 'COMPLETED_DISTANCE', description: 'Distance in kilometers', defaultValue: '0')
                                    ]
                                ) as int
                                def totalDistance = 20
                                def progress = (completedDistance / totalDistance) * 100
                                echo "Progress: |" + "=".repeat(progress / 10 as int) + " ".repeat(10 - (progress / 10 as int)) + "| ${progress as int}%"
                            }
                        
                            if (params.GYM.toBoolean()) {
                                if (day <= 5) {
                                    echo "Congratulations on signing up for the gym early! You're taking charge of your fitness goals!"
                                } else {
                                    echo "Well done signing up for the gym! A bit late, but you're on track now—time to hit those weights!"
                                }
                            } else {
                                if (day < 5) {
                                    echo "Don't forget to sign up for the gym! Getting started early will make all the difference for your March fitness goal."
                                } else if (day == 5) {
                                    echo "It's not too late! Sign up for the gym today and start working on your goals!"
                                } else {
                                    echo "Still haven't signed up for the gym? March is moving fast—get to it and crush those fitness goals!"
                                }
                            }
                        
                            if (params.YOGA.toBoolean()) {
                                if (day <= 5) {
                                    echo "Congratulations on signing up for yoga classes early! Time to find your zen and improve flexibility."
                                } else {
                                    echo "Great job signing up for yoga classes! A little late, but now you're ready to stretch into success!"
                                }
                            } else {
                                if (day < 5) {
                                    echo "Don't forget to sign up for yoga classes! Starting early will help you establish a routine."
                                } else if (day == 5) {
                                    echo "It's not too late! Sign up for yoga classes today and start your wellness journey."
                                } else {
                                    echo "March is flying by—don't miss your chance to sign up for yoga classes and achieve your fitness goals!"
                                }
                            }
                            break
                    }
                }
            }
        }
    }
}
